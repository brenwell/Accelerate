!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("accelerate",[],t):"object"==typeof exports?exports.accelerate=t():e.accelerate=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(3),a=function(){function e(t,i,r,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;n(this,e);var s=t,u=r,l=a,h=[],f=[],v=[],y=[];if(this.callBack=c,t>0&&0===i&&u*t>l){h=[0,0],v=[u,l];var d=(l-i*u)/(t-i),m=t*d;this.func=(0,o.QuadraticBezier)(h,[d,m],v)}else h=[0,0],f=[u/3,s*u/3],v=[2/3*u,l-i*u/3],y=[u,l],this.func=(0,o.CubicBezier)(h,f,v,y);this.complete=!1,this.V=t,this.vF=i,this.T=r,this.D=a,this.P0=h,this.P1=f,this.P2=v,this.P3=y}return r(e,[{key:"tangentInitial",value:function(e){return this.V*e}},{key:"dotPositions",value:function(){return[this.P0,this.P1,this.P2,this.P3]}},{key:"tangentFinal",value:function(e){return this.vF*e+(this.D-this.vF*this.T)}},{key:"getDistanceAndVelocity",value:function(e){if(this.complete)throw new Error("Accelerator: velocity change is complete. Cannot call this function");e>=this.T&&!this.complete&&(this.complete=!0,"function"==typeof this.callBack&&this.callBack());var t=this.func(e);return{distance:t.yValue,velocity:t.slopeValue}}},{key:"isComplete",value:function(){return this.complete}}]),e}();t.default=a},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t,i,r,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(n(this,e),this.callBack=a,this.complete=!1,this.V=t,this.vF=i,this.D=o,this.T=r,null===o&&null===r)throw new Error("Only one of dF tF can be null tF:"+r+" dF:"+o);if(null!==o&&null!==r)throw new Error("Exactly one of dF, tF MUST be false tF:"+r+" dF:"+o);if(null!==o){var c=(i-t)/2,s=o/c;this.acceleration=(i-t)/s,this.T=s}else this.acceleration=(i-t)/r,this.D=t*r+.5*this.acceleration*r*r}return r(e,[{key:"getDistanceAndVelocity",value:function(e){if(this.complete)throw new Error("Accelerator: velocity change is complete. Cannot call this function");e>=this.T&&!this.complete&&(this.complete=!0,"function"==typeof this.callBack&&this.callBack());var t=this.V+e*this.acceleration;return{distance:this.V*e+.5*this.acceleration*e*e,velocity:t}}},{key:"isComplete",value:function(){return this.complete}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.BezierCubic=function(){function e(t,i,r,o){n(this,e),this.P0=t,this.P1=i,this.P2=r,this.P3=o}return r(e,[{key:"derivative",value:function(e,t,i,n,r){function o(e,t,i,n){return e*(1-n)*(1-n)+2*t*(1-n)*n+i*n*n}return 3*(o(i,n,r,e)-o(t,i,n,e))}},{key:"bezFunc",value:function(e,t,i,n,r){return t*(1-e)*(1-e)*(1-e)+3*i*(1-e)*(1-e)*e+3*n*(1-e)*e*e+r*e*e*e}},{key:"xFromT",value:function(e){return this.bezFunc(e,this.P0[0],this.P1[0],this.P2[0],this.P3[0])}},{key:"xFromTDerivative",value:function(e){return this.derivative(e,this.P0[0],this.P1[0],this.P2[0],this.P3[0])}},{key:"yFromT",value:function(e){return this.bezFunc(e,this.P0[1],this.P1[1],this.P2[1],this.P3[1])}},{key:"slopeAtT",value:function(e){return this.derivative(e,this.P0[1],this.P1[1],this.P2[1],this.P3[1])/this.derivative(e,this.P0[0],this.P1[0],this.P2[0],this.P3[0])}}]),e}()},function(e,t,i){"use strict";function n(e,t,i,n){function r(e){function t(t){return a.xFromT(t)-e}function i(e){return a.xFromTDerivative(e)}var n=(0,s.default)(t,i,.5,null);if(!1===n)throw new Error("cannot find t for x in CubicBezier");var r=a.yFromT(n);return{yValue:r,slopeValue:a.slopeAtT(n)}}var a=new o.BezierCubic(e,t,i,n);return r}function r(e,t,i){function n(n){function o(e){return r.xFromT(e)-n}function a(e){return r.xFromTDerivative(e)}var c=(0,s.default)(o,a,.5,null);if(!1===c)throw console.log([e,t,i]),new Error("cannot find t for x in QuadraticBezier xValue:"+n);var u=r.yFromT(c),l=r.slopeAtT(c);return 0===u&&console.log("CubicBezier: yValue is zero"),{yValue:u,slopeValue:l}}var r=new a.BezierQuadratic(e,t,i);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.CubicBezier=n,t.QuadraticBezier=r;var o=i(2),a=i(4),c=i(6),s=function(e){return e&&e.__esModule?e:{default:e}}(c)},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();t.BezierQuadratic=function(){function e(t,i,r){n(this,e),this.P0=t,this.P1=i,this.P2=r}return r(e,[{key:"derivative",value:function(e,t,i,n){function r(e,t,i){return e*(1-i)+t*i}return 2*(r(i,n,e)-r(t,i,e))}},{key:"bezFunc",value:function(e,t,i,n){return t*(1-e)*(1-e)+2*i*(1-e)*e+n*e*e}},{key:"xFromT",value:function(e){return this.bezFunc(e,this.P0[0],this.P1[0],this.P2[0])}},{key:"xFromTDerivative",value:function(e){return this.derivative(e,this.P0[0],this.P1[0],this.P2[0])}},{key:"yFromT",value:function(e){return this.bezFunc(e,this.P0[1],this.P1[1],this.P2[1])}},{key:"slopeAtT",value:function(e){return this.derivative(e,this.P0[1],this.P1[1],this.P2[1])/this.derivative(e,this.P0[0],this.P1[0],this.P2[0])}}]),e}()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(0),c=n(a),s=i(1),u=n(s),l=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,e),null===t||void 0===t||"number"!=typeof t)throw new Error("Initial velocity not defined");var n={tickInterval:1/60,allowOverwrite:!0},o=Object.assign({},n,i);this.tickInterval=o.tickInterval,this.allowOverwrite=o.allowOverwrite,this.time=0,this.elapsedTimeChangingVelocity=0,this.totalDistance=0,this.changingVelocity=!1,this.isWaiting=!1,this.bezAccelerator=null,this.currentVelocity=t}return o(e,[{key:"advance",value:function(e){var t=e*this.tickInterval;return this.advanceByTimeInterval(t)}},{key:"advanceByTimeInterval",value:function(e){if(this.changingVelocity||this.isWaiting)if(!this.changingVelocity&&this.isWaiting)this.currentWaitingTime+=e,this.currentWaitingTime>=this.requiredWaitingTime&&(this.isWaiting=!1,"function"==typeof this.resolvePromiseFunction&&this.resolvePromiseFunction()),this._advanceTimeAndDistanceWhileCoasting(e);else{this.time+=e,this.elapsedTimeChangingVelocity+=e;var t=this.decelerator.getDistanceAndVelocity(this.elapsedTimeChangingVelocity),i=t.distance,n=t.velocity;this.currentVelocity=n,this.totalDistance=this.distanceBeforeVelocityChange+i,this.elapsedTimeChangingVelocity,this.timeForChange,this.totalDistance,this.currentVelocity,this.elapsedTimeChangingVelocity>=this.timeForChange&&(this.newVelocity,this.currentVelocity=this.newVelocity,this.changingVelocity=!1,"function"==typeof this.resolvePromiseFunction&&this.resolvePromiseFunction())}else this._advanceTimeAndDistanceWhileCoasting(e);return this.totalDistance}},{key:"getPosition",value:function(){return this.totalDistance}},{key:"getVelocity",value:function(){return this.currentVelocity}},{key:"setVelocity",value:function(e){if(this.changingVelocity)throw new Error("cannot setVelocity during an acceleration");this.currentVelocity=e}},{key:"accelerate",value:function(e,t,i){var n=this;if(this.allowOverwrite)this.kill();else{if(this.changingVelocity)throw new Error("cannot have two accelerations underway at the same time");if(this.isWaiting)throw new Error("cannot have commence acceleration while wait is underway")}var r=this.currentVelocity;return this.distanceBeforeVelocityChange=this.totalDistance,this.changingVelocity=!0,this.elapsedTimeChangingVelocity=0,this.timeForChange=t,this.newVelocity=e,this.distanceForChange=i,this.decelerator=null!==t&&null!==i?new c.default(r,e,t,i):new u.default(r,e,t,i),new Promise(function(e){n.resolvePromiseFunction=e})}},{key:"wait",value:function(e){var t=this;return new Promise(function(i,n){return!e||e<=0?void i():t.changingVelocity?void n("Accelerator: cannot wait while acceleration is underway"):t.isWaiting?void n("cannot have commence acceleration while wait is underway"):(t.isWaiting=!0,t.requiredWaitingTime=e,t.currentWaitingTime=0,void(t.resolvePromiseFunction=i))})}},{key:"kill",value:function(){this.changingVelocity?(this.changingVelocity=!1,"function"==typeof this.resolvePromiseFunction&&this.resolvePromiseFunction()):this.isWaiting&&(this.isWaiting=!1,"function"==typeof this.resolvePromiseFunction&&this.resolvePromiseFunction())}},{key:"_advanceTimeAndDistanceWhileCoasting",value:function(e){this.time+=e,this.totalDistance+=this.currentVelocity*e,this.currentVelocity,this.totalDistance,this.time}}]),e}();t.default=l},function(e,t,i){var n,r,o;!function(i,a){r=[],n=a,void 0!==(o="function"==typeof n?n.apply(t,r):n)&&(e.exports=o)}(0,function(){return function(e,t,i,n){n=n||{};for(var r=n.tolerance||1e-8,o=n.epsilon||1e-13,a=n.maxIterations||20,c=0;c<a;++c){var s=t(i);if(Math.abs(s)<o)return!1;result=i-e(i)/s;if(Math.abs(result-i)<r)return result;i=result}return!1}})}])});
//# sourceMappingURL=accelerate.min.js.map